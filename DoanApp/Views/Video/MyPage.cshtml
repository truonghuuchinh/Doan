@model IPagedList<Video_vm>
@using X.PagedList;
@{
    int count = 1;
}
<div class="col site-layout">
    <div class="img_kenhcuaban_noidung">
        <img src="@(ViewBag.UserMyPage.ImgChannel==null?"/Client/img/imgChannel.jpg":"/Client/imgChannel/"+ViewBag.UserMyPage.ImgChannel)" alt="Cinque Terre" width="1200" height="250">
        <div class="repair_img">
            <img src="/Client/img/camera.png" alt="Alternate Text" />
        </div>
       
    </div>
    
    <div class="pass_kenhcuaban">
        <div class="pass_kenhcuaban_left">
            <img class="icon-sidebar-item_heiht" alt="" src="@(ViewBag.UserMyPage.LoginExternal?ViewBag.UserMyPage.Avartar:"/Client/img/"+ViewBag.UserMyPage.Avartar)">
        </div>
        <div class="pass_kenhcuaban_right">
            <div class="pass_kenhcuaban_rights">@ViewBag.UserMyPage.FirtsName @ViewBag.UserMyPage.LastName</div>
            <div class="sub_dangkykenh">@ViewBag.CountUserFollow người đăng ký</div>
        </div>
    </div>
    <div class="danhsach_tible">
        <a href="kenhcuaban.html" class="khichthuoc_kenhcb" style="border-bottom: none;">
            <div class="trangchu_kenhcb">TRANG CHỦ</div>
        </a>
        <a href="videocuaban.html" class="khichthuoc_kenhcb cbs_cb">
            <div class="video_kenhcb">VIDEO</div>
        </a>
        <a href="" class="khichthuoc_kenhcb" style="border-bottom: none;">
            <div class="gioithieu_kenhcb">GIỚI THIỆU</div>
        </a>
        <div class="search_kencb">
            <div class="chuyenphai_kenhcb">
                <select id="search_name_video">
                    <option value="value">Tìm kiếm</option>
                </select>
                <div class="click_search_kenhcb">
                    <i style="margin:10px 0px 0px 10px;" class="fas fa-search"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="video_tailenS">
        <div class="name_chu__de">
            <div class="name_chu__de_text">Video tải lên</div>
        </div>
        <div class="content_video">
            @foreach (var item in Model)
            {
                <div class="container22">
                    <a id="movepage_detail-@item.Id" asp-action="DetailVideo" asp-controller="Home" asp-route-id="@item.Id">
                        <div class="container222">
                            <video width="261" height="165" onmouseover="viewBefore(@item.Id)" onmouseout="clearBefore(@item.Id)" src="~/Client/video/@item.LinkVideo" title="YouTube video player" class=" nextSecond nextSecond-@item.Id">
                            </video>

                        </div>

                        <div class="container222_end">
                            <div class="detail_video">
                                <img class="detail_lerft icon-sidebar-item_video" alt="" src="@(item.LoginExternal ? item.Avartar : "~/Client/avartar/" + item.Avartar)">
                                <div class="detail_rights">
                                    <span class="detail_right  text-sidebar-item_video">
                                        <p class="titleName">@item.Name </p>
                                    </span>
                                    <div class="text_color">@item.FirtsName @item.LastName</div>
                                    <div class="text_color_check">
                                        @ConvertViewCount.ConvertView(item.ViewCount) lượt xem • @CaculatorHours.Caculator(item.CreateDate)
                                    </div>

                                </div>

                            </div>
                        </div>
                    </a>
                </div>
                if (count > 4)
                {
                    count = 1;
                    <br />
                }
            }
        </div>

    </div>
</div>
<div class="modal" id="upload_img">
    <div class="modal_upload_img">
        <div class="header_videodau">
            <div class="benphaiheader_videodau">

            </div>
        </div>
        <div class="content_videodau">
            <form asp-action="UpdateImgChannel" id="fUpload" asp-controller="Video" method="post" enctype="multipart/form-data">
                <div class="na_tieude">
                Vui lòng chọn ảnh <span class="text-danger errorimg" id="errorimg"></span>
                </div>
                
                <div class="custom-file">
                    <input type="file" class="custom-file-input" name="fileUpload" id="updateImgChannel">
                    <label class="custom-file-label">Chọn Ảnh</label>
                    <input type="hidden" name="emailUser" value="@ViewBag.UserMyPage.Email" />

                </div>
                <img src="~/Client/img/default_image.png" class="imgReview" id="img_review" />
                <div class="sangphai_header_videodauu">
                    <button type="submit" class="xacnhanvi_deo" id="confirm_report">Xác nhận</button>
                </div>
                <div class="sangphai_header_videodauu">
                    <div type="button" class="huybovi_deo" data-dismiss="modal">Hủy</div>
                </div>
            </form>
            
        </div>

    </div>
</div>
<script>

   
    $(document).ready(function () {
        //-------Process update image of page-------
        $(".repair_img").click(function () {
            $("#upload_img").modal('show');
        });
        $("#updateImgChannel").change(function (event) {
            $("#errorimg").text('');
            var imgReview = document.querySelector("#img_review");
            imgReview.src = URL.createObjectURL(event.target.files[0]);
            imgReview.onload = function () {
                URL.revokeObjectURL(imgReview.src);
            }
        });
        $("#fUpload").submit(function (e) {
            if ($("#updateImgChannel").val() != '') return;
            $("#errorimg").text('(Vui lòng chọn ảnh)');
            e.preventDefault();
        });
        //-------End-------------------------------
        //-------Process search Video----
        $(".click_search_kenhcb").click(function () {
            var nameSearch = $("#select2-search_name_video-container").text();
            console.log("name: "+nameSearch);
            $.get("/Video/MyPage_Partial/?nameSearch=" + nameSearch, function (respone) {
                $(".content_video").html(respone);
            });
        });
        //-------End-----------------
        //-------Load list search--------
        $.get("/Video/ListVideoJson", function (respone) {
            respone = JSON.parse(respone);
            console.log(respone);
            $("#search_name_video").select2({
                them: 'clasic',
                placeholder: 'Tìm kiếm......',
                data: respone
            });
        })
        //-------End--------------------
        //----------Pagination----------
        Phantrang("/Video/MyPage_Partial/?page=");
        //----------End-----------------
    });
</script>